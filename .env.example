# Honey Drip Admin - Environment Variables
#
# Setup Instructions:
# 1. Copy this file: `cp .env.example .env.local` (local dev) or `.env` (production)
# 2. Fill in the values below with your actual API keys and configuration
# 3. DO NOT commit .env files to git (they're gitignored)
# 4. For production, set these variables in your deployment platform
#
# KEY PRINCIPLE:
# - VITE_* variables: Exposed to browser (OK for public tokens)
# - Other variables: Server-only (KEEP SECRET!)

################################################################################
## CLIENT-SIDE (Vite) - Exposed to Browser
## These are baked into the frontend bundle and visible to users
################################################################################

# SUPABASE: Database & Authentication
# Get from: https://app.supabase.com → Project Settings → API
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# MASSIVE PROXY: WebSocket Authentication Token
# This is generated server-side via /api/ws-token (ephemeral tokens)
# DEPRECATED: Static token no longer needed - server generates ephemeral tokens
# VITE_MASSIVE_PROXY_TOKEN=  (Optional, leave blank for production)

# FEATURE FLAGS: Development helpers
VITE_USE_UNIFIED_CHAIN=true          # Use unified options chain endpoint
VITE_TEST_AUTO_LOGIN=false           # Auto-login test user on page load
VITE_TEST_FAKE_DB=false              # Use fake database for testing

################################################################################
## SERVER-SIDE (Node.js) - NOT Exposed to Browser
## These variables are PRIVATE and must be kept secret!
################################################################################

# MASSIVE.COM API: Options & Indices Data Provider
# Get API key from: https://massive.com → Account Settings → API Keys
MASSIVE_API_KEY=YOUR_MASSIVE_API_KEY_HERE
MASSIVE_BASE_URL=https://api.massive.com
# Proxy token for WebSocket authentication (can be any random string, sync with client)
# Server generates ephemeral tokens via /api/ws-token endpoint
MASSIVE_PROXY_TOKEN=your_secure_proxy_token_here

# MASSIVE.COM S3 FLAT FILES: Bulk Historical Data (Phase 3 - Hybrid Backfill)
# Get credentials from: https://massive.com → Account Settings → Flat Files Access
# Required for hybrid backfill system (faster, more accurate historical data)
MASSIVE_AWS_ACCESS_KEY=YOUR_AWS_ACCESS_KEY_HERE
MASSIVE_AWS_SECRET_KEY=YOUR_AWS_SECRET_KEY_HERE
MASSIVE_S3_REGION=us-east-1
# Flat files provide:
# - True historical snapshots (vs live data approximations)
# - Bulk download (10-50x faster than API for large date ranges)
# - Complete coverage back to 2014 (Options/Indices Advanced plans)

# SUPABASE: Backend Admin (secret key)
# Get from: https://app.supabase.com → Project Settings → API → Service Role Key
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# DATA PROVIDER ROUTING: Which API to prefer for options data
OPTIONS_PROVIDER=massive              # Options: 'massive' | 'tradier'
# If Massive is unavailable, system automatically falls back to Tradier

# TRADIER: Fallback Data Provider (optional)
# Get from: https://tradier.com → Account → Settings → API
TRADIER_ACCESS_TOKEN=YOUR_TRADIER_TOKEN_HERE
TRADIER_BASE_URL=https://api.tradier.com/v1

# OPENAI: AI Trade Coach (Honey Coach)
# Get from: https://platform.openai.com/api-keys
# Required for AI coaching feature - uses GPT-4 Turbo
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE

# WEB ORIGIN: CORS Configuration
# Should match your deployment domain
WEB_ORIGIN=http://localhost:5173   # Local development
# WEB_ORIGIN=https://yourdomain.com # Production

# SERVER: Port Configuration
PORT=3000                           # Backend API port
# Vite dev server runs on 5173 by default, proxies to 3000 for /api and /ws

################################################################################
## OPTIONAL: Testing & Monitoring
################################################################################

# E2E TEST ACCOUNT (optional, for testing)
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=test_password_here

# LOG LEVEL (optional, default: 'info')
LOG_LEVEL=debug                     # Options: 'error' | 'warn' | 'info' | 'debug'

################################################################################
## REFERENCE: What Each Provider Offers
################################################################################

# MASSIVE.COM
# ✓ Options: Chains, quotes, Greeks (delta, gamma, theta, vega, rho, IV)
# ✓ Indices: SPX, NDX, VIX, RVX (bars, quotes, real-time)
# ✓ WebSocket: Real-time streaming of options, indices, trades
# ✓ Historical: 1m/5m/15m/60m/daily bars
# ✗ Stocks: Limited coverage (options-focused API)
#
# TRADIER
# ✓ Options: Chains with Greeks, quotes
# ✓ Stocks: Full stock quote/historical data
# ✓ Market data: Full market coverage
# ✓ WebSocket: Can be used as fallback
# ✗ Indices: No VIX/RVX support
# ✗ Greeks: Less detailed than Massive

# RECOMMENDATION:
# - Use MASSIVE for options trading (better Greeks, real-time streaming)
# - Use TRADIER as fallback for stock data and redundancy
# - System automatically switches if primary provider is down

################################################################################
## DEPLOYMENT NOTES
################################################################################

# RAILWAY.APP (Current Deployment)
# Set all variables in Railway dashboard:
# 1. Go to Project → Variables
# 2. Add each variable with the corresponding value
# 3. Railway will use these for your deployment
# 4. Environment variables are deployed automatically with each commit

# VERCEL (Alternative Frontend)
# Set VITE_* variables in Vercel dashboard:
# 1. Go to Project → Settings → Environment Variables
# 2. Only VITE_* variables are accessible to frontend

# DOCKER (Local/Self-hosted)
# Create .env.local with all variables:
# docker run --env-file .env.local -p 3000:3000 your-image
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key_here
OPENAI_API_KEY=your_openai_api_key_here